<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>How to be a plumber | Xmas Bashing</title><meta name=description content="A Christmas calendar focusing on bash scripting"><meta name=author content="LUG Esbjerg"><meta property="og:type" content="article"><meta property="og:url" content="https://rpede.github.io/xmas-bashing/blog/08/"><meta property="og:title" content="How to be a plumber"><meta property="og:description" content="A Christmas calendar focusing on bash scripting"><meta property="twitter:card" content="summary"><meta property="twitter:url" content="https://rpede.github.io/xmas-bashing/blog/08/"><meta property="twitter:title" content="How to be a plumber"><meta property="twitter:description" content="A Christmas calendar focusing on bash scripting"><link rel=canonical href=https://rpede.github.io/xmas-bashing/blog/08/><link rel=alternate type=application/rss+xml href=/index.xml title="Xmas Bashing"><link rel=icon type=image/x-icon href=/favicon.ico><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","headline":"How to be a plumber","url":"https:\/\/rpede.github.io\/xmas-bashing\/blog\/08\/","datePublished":"2025-12-08T00:00:00Z","dateModified":"2025-12-08T00:00:00Z","description":"A Christmas calendar focusing on bash scripting","author":{"@type":"Person","name":"LUG Esbjerg"}}</script><link rel=preload href=/xmas-bashing/fonts/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin><link rel=stylesheet href=/xmas-bashing/css/style.min.5ce1f93f36c4e8e221dd4c3f3f5b98ac9dabd9f6d2d163031124a31b637cfa24.css integrity="sha256-XOH5PzbE6OIh3Uw/P1uYrJ2r2fbS0WMDESSjG2N8+iQ="><script>(function(){const e=localStorage.getItem("theme")||"light",t=window.matchMedia("(prefers-color-scheme: dark)").matches,n=e!=="light"&&(e==="dark"||t)?"dark":"light";n==="dark"&&document.documentElement.setAttribute("data-theme","dark")})()</script></head><body><div class=container><header class=site-header><div class=header-content><a href=/ class=site-title>Xmas Bashing</a><div class=header-right><nav class=site-nav><ul><li><a href=/xmas-bashing/ class=nav-link>home</a></li><li><a href=/xmas-bashing/blog class=nav-link>blog</a></li></ul></nav><button id=theme-toggle class=theme-toggle aria-label="Toggle dark mode" title="Toggle theme">
<svg class="theme-icon moon-icon" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21a9 9 0 01-.5-17.986V3c-.354.966-.5 1.911-.5 3a9 9 0 009 9c.239.0.254.018.488.0A9.004 9.004.0 0112 21z"/></svg>
<svg class="theme-icon sun-icon hidden" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5V3m0 18v-2M7.05 7.05 5.636 5.636m12.728 12.728L16.95 16.95M5 12H3m18 0h-2M7.05 16.95l-1.414 1.414M18.364 5.636 16.95 7.05M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></button></div></div></header><main class=content><nav class=breadcrumb aria-label=breadcrumb><ul><li><a href=/>home</a></li><li><span>How to be a plumber</span></li></ul></nav><article class=post><header class=post-header><h1 class=post-title>How to be a plumber</h1><time class=post-date datetime=2025-12-08T00:00:00Z>Dec 8, 2025</time></header><div class=post-content><h2 id=background>Background</h2><p>Streams are a fundamental part of Linux command-line experience.
The concept is inherited from <a href=https://en.wikipedia.org/wiki/Unix>Unix</a>.</p><p>Following is the &ldquo;The Unix philosophy&rdquo; by Peter H. Salus:</p><blockquote><ul><li>Write programs that do one thing and do it well.</li><li>Write programs to work together.</li><li>Write programs to handle text streams, because that is a universal interface.</li></ul></blockquote><p>Let me provide some context.</p><p>Back when Unix was invented, computers had a minuscule amount of memory
compared to today.
A big machine had memory in the order of kilo-bytes.
That put some serious limitation on how big a single program could be.</p><p>The solution was to have small programs that could easily be combined together
for complex task.
The method for combining programs is with pipes, hence the title.</p><p>Each program can read from an input stream and write to an output stream.
You can connect the output stream of one program to the input stream of another
with pipes, the <code>|</code> symbol.</p><p>The input stream is called <strong>stdin</strong>, output is <strong>stdout</strong>.
There is also another output stream for errors called <strong>stderr</strong>.
Where <strong>std</strong> is short for standard.</p><p>Here is <a href="https://youtu.be/tc4ROCJYbm0?t=384">an old demonstration of pipes</a>
where Brian Kernighan (Unix co-inventor) use very simple programs and pipes to
build a spellchecker.
Most of the commands used in the demo doesn&rsquo;t exist anymore.
However, you can check out <a href=https://github.com/watson/old-unix-spell-checker>this
repository</a> to see how the
demo can be recreated using commands found on more modern systems.</p><h2 id=examples>Examples</h2><p>In today&rsquo;s world, pipes are great for creating scripts to automate tasks
without creating a lot of intermediate files.</p><p>Pipes are also a powerful tool to filter and transform text interactively.
As example, let&rsquo;s look at how you can use pipe when debugging issues related to
a faulty USB device.</p><p>First thing we could try is to simply list all the hardware in our machine.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw
</span></span></code></pre></div><p>That created a lot of output.
Let&rsquo;s see if we can narrow it down.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw <span style=color:#eceff4>|</span> grep -i usb
</span></span></code></pre></div><p>The <code>grep</code> command is used to filter the output to only lines containing the
word &ldquo;usb&rdquo;.
The <code>-i</code> flag makes it case-insensitive.
We use itbecause it might be spelled &ldquo;usb&rdquo;, &ldquo;USB&rdquo; or maybe &ldquo;Usb&rdquo;.</p><p>Just looking at lines with &ldquo;USB&rdquo; in them doesn&rsquo;t help us much.
We need some lines above an below to provide some context.
Let&rsquo;s try again with a context window of 10 lines.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw <span style=color:#eceff4>|</span> grep -C10 -i usb
</span></span></code></pre></div><p>Look to see if the device shows up and that it has been claimed by a driver.</p><p>We could also try to check kernel messages with the command <code>dmesg</code>.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dmesg <span style=color:#eceff4>|</span> grep -i usb
</span></span></code></pre></div><p><em>Note: dmesg needs to be run as root.</em></p><p>We might also try to look for the last (tail) 10 lines of output when we plug
the device in.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dmesg <span style=color:#eceff4>|</span> tail -n <span style=color:#b48ead>10</span>
</span></span></code></pre></div><h2 id=redirect-to-files>Redirect to files</h2><p>Being able to redirect streams to files is really handy.</p><p>We can <strong>redirect stdout</strong> to a file with <code>></code>.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw &gt; hardware.txt
</span></span></code></pre></div><p>We can <strong>redirect stderr</strong> with <code>2></code>.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw 2&gt; errors.txt
</span></span></code></pre></div><p>To <strong>redirect</strong> both <strong>stdout</strong> and <strong>stderr</strong>, use <code>&></code>.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lshw <span style=color:#eceff4>&amp;</span>&gt; output.txt
</span></span></code></pre></div><p>Last, we can <strong>redirect stdin</strong> using <code>&lt;</code>.</p><div class=highlight><pre tabindex=0 style=color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>wc -l &lt; hardware.txt
</span></span></code></pre></div><p><code>wc</code> is short for word count.
However, we can count lines instead by setting <code>-l</code> flag.</p></div></article></main><footer class=site-footer><div class=footer-content><div class=social-links><a href=/index.xml title=RSS rel="noopener noreferrer">rss</a></div><p class=footer-text>Â© 2025 LUG Esbjerg</p></div></footer></div><script src=/xmas-bashing/js/theme.min.676e5af9ed08ae050dc2a0576a038a9cf41cf92fb5f33872ef1073e9c0376404.js integrity="sha256-Z25a+e0IrgUNwqBXagOKnPQc+S+18zhy7xBz6cA3ZAQ="></script></body></html>