---
title: inotify, wait what?
data: 2025-12-20
---

Inotify is short for index node notify.
An index node (short inode) is a filesystem object (files and folder) in
Unix-style operating systems such as Linux.
The terminology is a bit crazy.

Anyway, inotify is an API that allows programs to monitor for changes to files
or folders.

## Install

To use it from the shell, we first need to install inotify-tools.

**Debian**

```sh
sudo apt install inotify-tools
```

**Arch Linux**

```sh
sudo pacman -S inotify-tools
```

## Usage

A simple usage is to wait for changes to a file.

If you are using bash:

```sh
inotifywait ~/.bash_history
```

Or, for ZSH:

```sh
inotifywait ~/.zsh_history
```

Then try to open another terminal.
As soon as a new shell is spawned, it will access its history file.

We can also wait for the file to be modified.

```sh
inotifywait --event modify ~/.bash_history
```

Try to type a command in another shell.

This is super neat in cases where you want to automate some action when a file
changes.
This is great for workflow automation.

Here is an example that restarts Docker services when `docker-compose.yml` is
changed.

```sh
inotifywait -e close_write -m --format '%w %e' docker-compose.yml | while read file action; do
  echo "Event $action on $file"
  echo "Restarting docker services"
  docker compose restart
done
```

I've tested above with `nano`.
Different editors actually handle saving files in various ways.
`vim` for instance first saves to a temporary file, then replaces the original.

[IDEs](https://en.wikipedia.org/wiki/Integrated_development_environment) use
inotify watches heavily, such as for re-indexing source code when dependencies
change.
